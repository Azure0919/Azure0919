<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  <subtitle>小九爱喝酸奶</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://azure0919.github.io/"/>
  <updated>2020-02-24T03:55:04.983Z</updated>
  <id>https://azure0919.github.io/</id>
  
  <author>
    <name>NineEr</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>spring-cloud-gateway-yml</title>
    <link href="https://azure0919.github.io/posts/80819933/"/>
    <id>https://azure0919.github.io/posts/80819933/</id>
    <published>2020-02-22T12:31:56.000Z</published>
    <updated>2020-02-24T03:55:04.983Z</updated>
    
    <content type="html"><![CDATA[<ul><li>spring-cloud-gateway的配置是这样的<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gateway:</span><br><span class="line">      routes:</span><br><span class="line">        - id: goods_route #唯一表示符号</span><br><span class="line">          #uri: http://localhost:18081 #用户请求需要路由到该服务[指定要路由的服务]</span><br><span class="line">          uri: lb:<span class="comment">//goods #使用loadBalanceClient 实现负载均衡后面是微服务的名称[主要用于集群环境单体可直接写地址]</span></span><br><span class="line">          predicates: #路由断言[规则]</span><br><span class="line">            #- Host=cloud.sx.nine** #用户请求域名配置规则,所有以cloud.sx.nine的请求都将被路由至http://localhost:18081微服务</span><br><span class="line">            #- Path=/api/brand/** #根据请求路径过滤,所有以/brand开始的请求都路由至http://localhost:18081微服务</span><br><span class="line">            - Path=<span class="comment">/**</span></span><br><span class="line"><span class="comment">          filters:</span></span><br><span class="line"><span class="comment">              - StripPrefix=1 #将请求路径中的第一个路径去掉,请求路径以/区分,一个/代表一个路径</span></span><br><span class="line"><span class="comment">              #- PrefixPath=/band #用户所有请求添加/brand前缀并且将该请求路由到http://localhost:18081微服务</span></span><br><span class="line"><span class="comment">          - name: RequestRateLimiter</span></span><br><span class="line"><span class="comment">            args:</span></span><br><span class="line"><span class="comment">              key-resolver: "#{<span class="doctag">@ipKeyResolver</span>}"</span></span><br><span class="line"><span class="comment">              redis-rate-limiter.replenishRate: 1</span></span><br><span class="line"><span class="comment">              redis-rate-limiter.burstCapacity: 4</span></span><br></pre></td></tr></tbody></table></figure></li><li>报错是这样的<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.yaml.snakeyaml.parser.ParserException: <span class="keyword">while</span> parsing a block collection</span><br><span class="line"> in <span class="string">'reader'</span>, line <span class="number">20</span>, column <span class="number">13</span>:</span><br><span class="line">                - Path=/api/brand<span class="comment">/** #根据请求路径过滤,所 ... </span></span><br><span class="line"><span class="comment">                ^</span></span><br><span class="line"><span class="comment">expected &lt;block end&gt;, but found '&lt;block mapping start&gt;'</span></span><br><span class="line"><span class="comment"> in 'reader', line 21, column 14:</span></span><br><span class="line"><span class="comment">                 filters:</span></span><br><span class="line"><span class="comment">                 ^</span></span><br></pre></td></tr></tbody></table></figure><ul><li>哎头疼 yml配置文件对格式要求太严格了<br>解决方案:   </li></ul><ul><li>StripPrefix与- name对齐 其他的跟随缩进就好了<pre><code class="java">filters:       - StripPrefix=1 #将请求路径中的第一个路径去掉,请求路径以/区分,一个/代表一个路径          #- PrefixPath=/band #用户所有请求添加/brand前缀并且将该请求路由到http://localhost:18081微服务       - name: RequestRateLimiter         args:          key-resolver: <span class="string">"#{@ipKeyResolver}"</span>          redis-rate-limiter.replenishRate: <span class="number">1</span>          redis-rate-limiter.burstCapacity: <span class="number">1</span></code></pre></li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;spring-cloud-gateway的配置是这样的&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;
      
    
    </summary>
    
    
    
      <category term="bug" scheme="https://azure0919.github.io/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>nginx openresty content_by_lua_file 404</title>
    <link href="https://azure0919.github.io/posts/51429/"/>
    <id>https://azure0919.github.io/posts/51429/</id>
    <published>2020-02-19T07:39:21.000Z</published>
    <updated>2020-02-23T08:00:42.889Z</updated>
    
    <content type="html"><![CDATA[<p>配置好lua脚本如下错误:  </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">nginx openresty content_by_lua_file 404错误:2020/02/10 19:18:59 [error] 21231#0: *63 failed to load external Lua file "/home/l/lua/content_lua.lua":</span><br><span class="line">cannot open /home/l/lua/content_lua.lua: Permission denied, client: [ip], server: localhost, request: <span class="string">"POST /lua_server HTTP/1.1"</span>, host: <span class="string">"[ip]+[port]"</span></span><br></pre></td></tr></tbody></table></figure><p>nginx配置文件里添加 </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user root root;</span><br></pre></td></tr></tbody></table></figure><p>即可</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;配置好lua脚本如下错误:  &lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
    
    
      <category term="bug" scheme="https://azure0919.github.io/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>blog introduce</title>
    <link href="https://azure0919.github.io/posts/24267/"/>
    <id>https://azure0919.github.io/posts/24267/</id>
    <published>2020-02-16T06:50:35.000Z</published>
    <updated>2020-02-23T08:00:25.200Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>关于博客</p></blockquote><blockquote><p>Welcome to my blog ! I would appreciate your guidance .</p></blockquote><ul><li><p>记录程序媛技术与生活  </p></li><li><p>分享遇到的bug解决方案 以及分享生活有所感触的一切  </p></li><li><p>等我成长时会有技术分享  </p></li><li><p>欢迎同行技术交流 不对的地方还请多多赐教</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Author</span>: NineEr</span><br><span class="line"><span class="meta">@Date</span>: <span class="number">2020</span>/<span class="number">2</span>/<span class="number">2</span> <span class="number">18</span>:<span class="number">53</span></span><br><span class="line"><span class="meta">@Description</span>: 小九爱喝酸奶</span><br></pre></td></tr></tbody></table></figure></li><li><p>博客搭建参考:<br><a href="https://blog.csdn.net/weixin_39879178/article/details/80319392" target="_blank" rel="noopener">https://blog.csdn.net/weixin_39879178/article/details/80319392</a></p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;关于博客&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Welcome to my blog ! I would appreciate your guidance .&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p
      
    
    </summary>
    
    
    
      <category term="blog" scheme="https://azure0919.github.io/tags/blog/"/>
    
  </entry>
  
</feed>
